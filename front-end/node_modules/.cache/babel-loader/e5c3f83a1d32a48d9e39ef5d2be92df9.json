{"ast":null,"code":"import _toConsumableArray from \"D:\\\\gambling-website\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:\\\\gambling-website\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\gambling-website\\\\front-end\\\\src\\\\App.js\";\nimport React, { useState, useRef } from \"react\";\nimport { useSpring, animated } from \"react-spring\";\nimport useMeasure from \"./useMeasure\";\nimport { nanoid } from \"nanoid\";\nimport * as easings from \"d3-ease\";\nimport \"./App.css\";\n\nfunction App() {\n  var _this = this;\n\n  var _useMeasure = useMeasure(),\n      _useMeasure2 = _slicedToArray(_useMeasure, 2),\n      bind = _useMeasure2[0],\n      screenWidth = _useMeasure2[1].width;\n\n  var blocksAmount = 100;\n  var blocksOnScreen = 6;\n  var gap = 5;\n  var fullWidth = blocksAmount * (screenWidth - 6 * gap) / blocksOnScreen;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      animate = _useState2[0],\n      setAnimate = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      canAnimate = _useState4[0],\n      setCanAnimate = _useState4[1];\n\n  var disableAnim = useRef(false);\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      winnerBlock = _useState6[0],\n      setWinnerBlock = _useState6[1];\n\n  var _useState7 = useState(1.11),\n      _useState8 = _slicedToArray(_useState7, 2),\n      scrollStep = _useState8[0],\n      setStep = _useState8[1];\n\n  var _useSpring = useSpring({\n    o: animate ? 1 : 0,\n    from: {\n      o: 0\n    },\n    immediate: disableAnim.current,\n    onRest: function onRest() {\n      disableAnim.current = true;\n      setCanAnimate(true);\n      disableAnim.current = false;\n    },\n    reset: true,\n    config: {\n      duration: 4000,\n      easing: easings.easeCircleOut\n    }\n  }),\n      o = _useSpring.o;\n\n  var _useSpring2 = useSpring({\n    from: {\n      opacity: 0\n    },\n    opacity: canAnimate ? 1 : 0\n  }),\n      opacity = _useSpring2.opacity;\n\n  var handleClick = function handleClick() {\n    setCanAnimate(false);\n\n    if (winnerBlock) {\n      setArr(function (prev) {\n        return [].concat(_toConsumableArray(prev.splice(winnerBlock - 2, blocksOnScreen)), _toConsumableArray(prev));\n      });\n    }\n\n    var blocks = document.querySelector(\".blocks__wrapper\");\n\n    if (blocks && animate) {\n      setAnimate(false);\n    }\n\n    var random = (Math.random() + 2.2) * 0.5;\n    setStep(random);\n    var scrollWidth = (screenWidth / random + 1) * counter;\n    var winnerIndex = Math.ceil(scrollWidth / (screenWidth / blocksOnScreen + gap)) + 2; // 6 - amount of blocks on a screen, + 2 because we start with 3-rd block\n\n    setWinnerBlock(winnerIndex);\n    setAnimate(function (prev) {\n      return !prev;\n    });\n  };\n\n  var counter = fullWidth / screenWidth;\n\n  var _useState9 = useState(Array.from(Array(blocksAmount).keys())),\n      _useState10 = _slicedToArray(_useState9, 2),\n      arr = _useState10[0],\n      setArr = _useState10[1];\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blocks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(animated.div, Object.assign({\n    style: {\n      transform: o.interpolate({\n        range: [0, 0.95, 1],\n        output: [0, screenWidth / scrollStep, screenWidth / scrollStep + 1]\n      }).interpolate(function (x) {\n        return \"translateX(\".concat(-x * counter, \"px)\");\n      })\n    },\n    className: \"blocks__wrapper\"\n  }, bind, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), arr.map(function (e) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: nanoid(),\n      className: \"block\",\n      style: {\n        minWidth: \"\".concat(screenWidth / blocksOnScreen, \"px\"),\n        height: \"\".concat(screenWidth / blocksOnScreen, \"px\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, e);\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClick,\n    disabled: !canAnimate,\n    className: \"btn\",\n    style: {\n      backgroundColor: canAnimate ? \"#ff69b4\" : \"grey\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"start\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"winner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, \"your price :\", \" \", /*#__PURE__*/React.createElement(animated.span, {\n    style: {\n      opacity: opacity,\n      display: canAnimate ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, arr[winnerBlock])));\n}\n\nexport default App;","map":{"version":3,"names":["React","useState","useRef","useSpring","animated","useMeasure","nanoid","easings","App","bind","screenWidth","width","blocksAmount","blocksOnScreen","gap","fullWidth","animate","setAnimate","canAnimate","setCanAnimate","disableAnim","winnerBlock","setWinnerBlock","scrollStep","setStep","o","from","immediate","current","onRest","reset","config","duration","easing","easeCircleOut","opacity","handleClick","setArr","prev","splice","blocks","document","querySelector","random","Math","scrollWidth","counter","winnerIndex","ceil","Array","keys","arr","transform","interpolate","range","output","x","map","e","minWidth","height","backgroundColor","display"],"sources":["D:/gambling-website/front-end/src/App.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport useMeasure from \"./useMeasure\";\r\nimport { nanoid } from \"nanoid\";\r\nimport * as easings from \"d3-ease\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [bind, { width: screenWidth }] = useMeasure();\r\n  const blocksAmount = 100;\r\n  const blocksOnScreen = 6;\r\n  const gap = 5;\r\n  const fullWidth = (blocksAmount * (screenWidth - 6 * gap)) / blocksOnScreen;\r\n  const [animate, setAnimate] = useState(false);\r\n  const [canAnimate, setCanAnimate] = useState(true);\r\n  const disableAnim = useRef(false);\r\n  const [winnerBlock, setWinnerBlock] = useState();\r\n  const [scrollStep, setStep] = useState(1.11);\r\n  const { o } = useSpring({\r\n    o: animate ? 1 : 0,\r\n    from: { o: 0 },\r\n    immediate: disableAnim.current,\r\n    onRest: () => {\r\n      disableAnim.current = true;\r\n      setCanAnimate(true);\r\n      disableAnim.current = false;\r\n    },\r\n    reset: true,\r\n    config: {\r\n      duration: 4000,\r\n      easing: easings.easeCircleOut\r\n    }\r\n  });\r\n\r\n  const { opacity } = useSpring({\r\n    from: { opacity: 0 },\r\n    opacity: canAnimate ? 1 : 0\r\n  });\r\n\r\n  const handleClick = () => {\r\n    setCanAnimate(false);\r\n    if (winnerBlock) {\r\n      setArr((prev) => [\r\n        ...prev.splice(winnerBlock - 2, blocksOnScreen),\r\n        ...prev\r\n      ]);\r\n    }\r\n    const blocks = document.querySelector(\".blocks__wrapper\");\r\n    if (blocks && animate) {\r\n      setAnimate(false);\r\n    }\r\n    const random = (Math.random() + 2.2) * 0.5;\r\n    setStep(random);\r\n    const scrollWidth = (screenWidth / random + 1) * counter;\r\n    const winnerIndex =\r\n      Math.ceil(scrollWidth / (screenWidth / blocksOnScreen + gap)) + 2; // 6 - amount of blocks on a screen, + 2 because we start with 3-rd block\r\n    setWinnerBlock(winnerIndex);\r\n    setAnimate((prev) => !prev);\r\n  };\r\n  const counter = fullWidth / screenWidth;\r\n  const [arr, setArr] = useState(Array.from(Array(blocksAmount).keys()));\r\n  return (\r\n    <>\r\n      <div className=\"blocks\">\r\n        <animated.div\r\n          style={{\r\n            transform: o\r\n              .interpolate({\r\n                range: [0, 0.95, 1],\r\n                output: [\r\n                  0,\r\n                  screenWidth / scrollStep,\r\n                  screenWidth / scrollStep + 1\r\n                ]\r\n              })\r\n              .interpolate((x) => `translateX(${-x * counter}px)`)\r\n          }}\r\n          className=\"blocks__wrapper\"\r\n          {...bind}\r\n        >\r\n          {arr.map((e) => {\r\n            return (\r\n              <div\r\n                key={nanoid()}\r\n                className=\"block\"\r\n                style={{\r\n                  minWidth: `${screenWidth / blocksOnScreen}px`,\r\n                  height: `${screenWidth / blocksOnScreen}px`\r\n                }}\r\n              >\r\n                {e}\r\n              </div>\r\n            );\r\n          })}\r\n        </animated.div>\r\n      </div>\r\n      <button\r\n        onClick={handleClick}\r\n        disabled={!canAnimate}\r\n        className=\"btn\"\r\n        style={{ backgroundColor: canAnimate ? \"#ff69b4\" : \"grey\" }}\r\n      >\r\n        start\r\n      </button>\r\n      <div className=\"winner\">\r\n        your price :{\" \"}\r\n        <animated.span\r\n          style={{ opacity, display: canAnimate ? \"block\" : \"none\" }}\r\n        >\r\n          {arr[winnerBlock]}\r\n        </animated.span>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}